[build]
  command = 'make build'
  functions = 'functions'
  publish = '_site'
  environment = { AWS_LAMBDA_JS_RUNTIME = 'nodejs12.x' }
[dev]
  autoLaunch = true
[[headers]]
  for = "/*"
  [headers.values]
    Permissions-Policy = "interest-cohort=()"

# Config for the Netlify Build Plugin: netlify-plugin-minify-html
[[plugins]]
  package = "netlify-plugin-minify-html"

  # Specify which deploy contexts we'll minify HTML in.
  # Supports any Deploy Contexts available in Netlify.
  # https://docs.netlify.com/site-deploys/overview/#deploy-contexts
  [plugins.inputs]
    contexts = [
      'production',
      'branch-deploy',
      'deploy-preview'
    ]

  # Optionally, override the default options for the minification
  # https://github.com/kangax/html-minifier#options-quick-reference
  [plugins.inputs.minifierOptions]
    removeComments = true
    collapseInlineTagWhitespace = false

[[plugins]]
  package = "netlify-plugin-checklinks"

  [plugins.inputs]
    contexts = [
      'production',
      'branch-deploy',
      'deploy-preview'
    ]

    # An array of glob patterns for pages on your site Recursive traversal will
    # start from these
    entryPoints = [ "*.html", ]

    # Recurse through all the links and asset references on your page, starting
    # at the entrypoints
    recursive = true

    # Checklinks outputs TAP
    # (https://testanything.org/tap-version-13-specification.html) by default.
    # Enabling pretty mode makes the output easier on the eyes.
    pretty = true

    # You can mark some check as skipped, which will block checklinks from ever
    # attempting to execute them. skipPatterns is an array of strings you can
    # match against failing reports
    skipPatterns = []

    # You can mark some check as todo, which will execute the check, but allow
    # failures. todoPatterns is an array of strings you can match against
    # failing reports
    todoPatterns = []

    # Report on all broken links to external pages. Enabling this will make
    # your tests more brittle, since you can't control external pages.
    checkExternal = false

    # Enable to check references to source maps, source map sources etc. Many
    # build tools don't emit working references, so this is disabled by default
    followSourceMaps = false
